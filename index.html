<!DOCTYPE html>
<html>
<head>
    <title>PROTOTYPE</title>
    <meta charset="utf-8">
</head>
<body>
    <div class="1"></div>

    <script src="READER.js"></script>
    <script>
        let sibal = document.querySelector("div")
        let currText 
        let currID
        window.addEventListener('DOMContentLoaded', function () {
            READER().then(function (contents) {
                let str = contents.split("-_-_-\r\n")
                let i
                let arr = []
                for (i =0; i<str.length-1;i+=2){
                    console.log(str[i])
                    arr[i] = str[i]
                    let ulElement = document.createElement("ul")
                    let liElement = document.createElement("li")
                    console.log(ulElement)
                    ulElement.innerText = str[i]
                    ulElement.id = "ahrck"
                    ulElement.className = str[i]
                    liElement.innerText = str[i+1]
                    liElement.id = "sodyd"
                    liElement.className = str[i]
                    
                    sibal.appendChild(ulElement)
                    sibal.appendChild(liElement)
                    ulElement.addEventListener("mouseenter", Enter)
                    liElement.addEventListener("mouseenter", Enter)
                }
                function Enter(event){
                    currText =event.target.innerText
                    currID = event.target.id
                    
                    event.target.addEventListener('dblclick', popup)
                }
                function popup(event){
                    let a = event.target.className.split(".")
                    let arr1 = []
                    let i
                    let j =0
                    for(i =0;i<arr.length;i+=2){
                        
                        b = arr[i].split(".").slice(0,a.length).join(".")
                        c = a.join(".")
                        
                        if(b ===c){
                            
                            arr1[j] = arr[i]
                            
                            j++
                        }
                    }
                    console.log(arr1)
                    if(event.target.id === "ahrck"){
                        arr[arr.length+1] = event.target.className
                        var ret = window.open('new.html', arr1[0])
                    }
                    else if (event.target.id === "sodyd")
                        var ret = window.open('edit.html', event.target.innerText)
                }


               
            });
        });


    </script>
</body>
</html>
